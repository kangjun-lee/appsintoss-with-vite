# Migrating to v2.x - Toss Design System Mobile

## Overview

This guide covers migrating from `@toss/tds-mobile` v1.x to v2.x, including automated CLI-based migration and manual steps.

## Key Changes Summary

| Component | Change | Example |
|-----------|--------|---------|
| Badge | `type` → `color`, `style` → `variant`, `htmlStyle` → `style` | `<Badge color="primary" variant="filled" />` |
| BoardRow | `RightArrow` → `ArrowIcon` | `<BoardRow.ArrowIcon />` |
| BottomCTA/FixedBottomCTA | `TypeA` → `Single`, `TypeB` → `Double` | `<BottomCTA.Single />` |
| Button | `type` → `color`, `style` → `variant`, `htmlType` → `type`, `htmlStyle` → `style`, size values updated | `<Button color="primary" variant="filled" size="small" />` |
| IconButton | `label` → `aria-label` | `<IconButton aria-label="close" />` |
| ListRow | `verticalPadding` values remapped | `<ListRow verticalPadding="medium" />` |
| TextButton | `typography` → `size` | `<TextButton size="medium" />` |
| Top | `subtitle1` → `subtitleTop`, `subtitle2` → `subtitleBottom` | `<Top subtitleTop="..." />` |

## Automated Migration

### Installation

```bash
pnpm up "@toss/tds-mobile*"
pnpm install @toss/tds-mobile-ait
pnpm remove @toss/tds-mobile-bedrock
```

### Running the CLI

```bash
pnpm exec @toss/tds-mobile-migration tds-v2 --glob="{src,pages}/**/*{tsx,ts}"
```

### CLI Limitations

⚠️ **Local wrapper components are NOT automatically migrated.** Custom components wrapping TDS components must be manually updated.

#### Example of Non-Migrated Case

```typescript
// Local wrapper - NOT auto-migrated
export const MyButton = (props: ComponentProps<typeof Button>) => {
  return <Button {...props} />;
};

// Usage - manual update needed
function SomeComponent() {
  return (
    <MyButton
      type="primary"            // ❌ Not converted to color
      style="filled"            // ❌ Not converted to variant
      htmlStyle={{ margin: 4 }} // ❌ Not converted to style
    >
      Button
    </MyButton>
  );
}
```

## Manual Migration Guide

### Badge

```typescript
// type → color
-<Badge type="blue" style="filled">Badge</Badge>
+<Badge color="blue" variant="filled">Badge</Badge>

// htmlStyle → style
-<Badge htmlStyle={{ backgroundColor: 'red' }}>Badge</Badge>
+<Badge style={{ backgroundColor: 'red' }}>Badge</Badge>
```

### Button

```typescript
// type → color
-<Button type="primary">Button</Button>
+<Button color="primary">Button</Button>

// style → variant
-<Button style="filled">Button</Button>
+<Button variant="filled">Button</Button>

// htmlType → type
-<Button htmlType="submit">Form Button</Button>
+<Button type="submit">Form Button</Button>

// Size remapping: tiny→small, big→xlarge
-<Button size="tiny">Small</Button>
+<Button size="small">Small</Button>

-<Button size="big">Large</Button>
+<Button size="xlarge">Large</Button>
```

### IconButton

```typescript
// label → aria-label (required property)
-<IconButton label="Close" />
+<IconButton aria-label="Close" />
```

### ListRow

Vertical padding values remapped to T-shirt sizing:

| v1.x | v2.x |
|------|------|
| extraSmall/-8 | small |
| small/-16 | medium |
| medium/-24 | large |
| large/-32 | xlarge |

```typescript
-<ListRow verticalPadding="small">Padding</ListRow>
+<ListRow verticalPadding="medium">Padding</ListRow>
```

### TextButton

Typography values remapped to size:

| v1.x | v2.x |
|------|------|
| t7 | xsmall |
| t6 | small |
| t5 | medium |
| t4 | large |
| t3 | xlarge |
| st2 | xxlarge |

```typescript
-<TextButton typography="t7">Small</TextButton>
+<TextButton size="xsmall">Small</TextButton>
```

### Top

```typescript
// subtitle1 → subtitleTop
-<Top subtitle1="Top subtitle">Title</Top>
+<Top subtitleTop="Top subtitle">Title</Top>

// subtitle2 → subtitleBottom
-<Top subtitle2="Bottom subtitle">Title</Top>
+<Top subtitleBottom="Bottom subtitle">Title</Top>
```

### BottomCTA / FixedBottomCTA

```typescript
// TypeA → Single
-<BottomCTA.TypeA onClick={handleClick}>Button</BottomCTA.TypeA>
+<BottomCTA.Single onClick={handleClick}>Button</BottomCTA.Single>

// TypeB → Double
-<BottomCTA.TypeB leftButton={...} rightButton={...} />
+<BottomCTA.Double leftButton={...} rightButton={...} />
```

## Provider Update

The `TDSMobileBedrockProvider` has been replaced with `TDSMobileAITProvider`. The new provider receives updated peer dependencies and supports `brandColor` injection for consistent button theming.
